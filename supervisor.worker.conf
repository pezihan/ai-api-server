[program:ai_server_worker]
# 核心修改：通过bash -l（登录shell）启动，加载完整环境
command=/bin/bash -l -c "/home/ubuntu/miniconda3/envs/ai-server/bin/python /home/ubuntu/ai-api-server/start_worker.py"
directory=/home/ubuntu/ai-api-server  # 程序运行的工作目录
autostart=true  # 随supervisor启动自动启动
autorestart=true  # 程序崩溃后自动重启
startretries=3  # 启动失败重试次数
user=ubuntu  # 运行程序的用户
# 日志文件
stdout_logfile=/var/log/ai_server_worker.log  # 标准输出日志
stderr_logfile=/var/log/ai_server_worker.log  # 错误日志
redirect_stderr=true
stdout_logfile_maxbytes=50MB  # 日志分片大小
stdout_logfile_backups=10  # 日志备份数量
# 仅保留基础PATH（bash -l会自动加载完整环境，无需手动声明CC/CXX）
environment=PATH="/home/ubuntu/miniconda3/envs/ai-server/bin:$PATH"